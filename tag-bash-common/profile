#!/usr/bin/env sh
#

# {{{ Initialization
SHELL_DIR="~/.shell"

# Load pre initialization files
INIT_FILE="$HOME/${SHELL_DIR}/init.sh"
if test -r ${INIT_FILE}; then
    . ${INIT_FILE}
fi
unset INIT_FILE

# }}}

# {{{ Utilities
have() {
    type "$@" &>/dev/null
}
# }}}

# {{{ Environment variables
PATH=$HOME/bin:${PATH}
PAGER=less
LESS="-F -g -i -M -R -S -w -X -z-4"

if [ -z "$VISUAL" ]; then
    have vim && VISUAL=vim || VISUAL=vi
fi
EDITOR=$VISUAL

if [ ! -d "$TMPDIR" ]; then
  TMPDIR="/tmp/$LOGNAME"
  mkdir -p -m 700 "$TMPDIR"
fi

if [ "$OSTYPE" == darwin* ]; then
    BROWSER="open"
else
    BROWSER="lynx"
fi

if [ -n "$DISPLAY" ]; then
    BROWSER="firefox"
fi

export BROWSER EDITOR LESS PAGER PATH TMPDIR VISUAL 

if [ -z "$LANG" ]; then
  export LANG="en_US.UTF-8"
fi

# }}}

# {{{ Source files
# Load post initialization files
POST_FILE="~/${SHELL_DIR}/post-init.sh"
if test -r ${POST_FILE}; then
    . ${POST_FILE}
fi
unset POST_FILE

# Source optional local configuration
LOCAL_FILE="$HOME/.profile.local"
if test -r "$LOCAL_FILE"; then
    . "$LOCAL_FILE"
fi
unset LOCAL_FILE
# }}}
