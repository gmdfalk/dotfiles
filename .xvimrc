set nowrap
"set nowrapscan
" Send input to system first. Might fix issues for non-US keyboard layouts.
set alwaysuseinputsource
" Use the OS clipboard by default (on versions compiled with `+clipboard`)
set clipboard=unnamed
" Add the g flag to search/replace by default
set gdefault
" Enable line numbers
set number
" Highlight cursor periodically
set blinkcursor
" Highlight searches?
set hlsearch
" Ignore case of searches
set ignorecase
" Unless there are capital letters in the search term
set smartcase
" Highlight dynamically as pattern is typed
set incsearch
" Don't show status line.
set laststatus=0
" Disable error bells
set noerrorbells
" Use relative line numbers
set relativenumber

" Mapleader is currently not supported
"let mapleader = "\<Space>"

"" Files
noremap <Space>W :w !sudo tee % > /dev/null<CR>
noremap <Space>o :xccmd openQuickly<CR>

"" Various
" Repeat last command.
noremap ö :<Up><CR>
noremap <Space>ö @:<CR>
" Quickly replay the q macro.
noremap <Space>q @q
" ESC is a buzzkill
noremap ä <ESC>
inoremap ä <ESC>

" Window management
" Go to window below
noremap <Space>wj <C-w>j
" Go left
noremap <Space>wh <C-w>h
" Go up
noremap <Space>wk <C-w>k
" Go right
noremap <Space>wl <C-w>l
" Create new window (with last used layout)
noremap <Space>wn <C-w>n
" Close window
noremap <Space>wq <C-w>q
" Split window horizontally
noremap <Space>ws <C-w>s
" Split window vertically
noremap <Space>wv <C-w>v
" Jump to next editor
noremap <Space>wö <C-w>w
" Jump to previous editor
noremap <Space>wÖ <C-w>W
" Layout: Assistant Editors on the right
noremap <Space>ww :xccmd changeToAssistantLayout_RV<CR>
" Layout: Assistant Editors on the bottom
noremap <Space>we :xccmd changeToAssistantLayout_BH<CR>
" Layout: Assistant Editors stacked horizontally
noremap <Space>wr :xccmd changeToAssistantLayout_RH<CR>
" Layout: Assistant Editors stacked vertically
noremap <Space>wt :xccmd changeToAssistantLayout_BV<CR>
" Switch back to single editor
noremap <Space>wf :xccmd changeToStandardEditor<CR>
" Switch to split window (Standard + Assistant)
noremap <Space>wg :xccmd changeToGeniusEditor<CR>
" Version Control views
"noremap <Space>wy :xccmd changeToVersionEditor<CR>
noremap <Space>wy :xccmd changeToVersionEditorBlameView<CR>
noremap <Space>wx :xccmd changeToVersionEditorLogView<CR>
noremap <Space>wc :xccmd changeToVersionEditorComparisonView<CR>

" Text
nnoremap <Space>c :xccmd commentAndUncommentCurrentLines<CR>
vnoremap <Space>c :xccmd commentAndUncommentCurrentLines<CR>gv
" These two mappings are set in XCode directly as gv behaves strangely here
"vnoremap <C-j> :xccmd moveCurrentLineDown<CR>gv
"vnoremap <C-k> :xccmd moveCurrentLineUp<CR>gv
nnoremap <C-h> :xccmd shiftLeft<CR>
nnoremap <C-l> :xccmd shiftRight<CR>
inoremap <C-h> :xccmd shiftLeft<CR>
inoremap <C-l> :xccmd shiftRight<CR>
vnoremap <C-h> :xccmd shiftLeft<CR>gv
vnoremap <C-l> :xccmd shiftRight<CR>gv

" Folding
noremap <Space>fd :xccmd fold<CR>
noremap <Space>fD :xccmd unfold<CR>
noremap <Space>fu :xccmd unfoldAll<CR>
noremap <Space>fm :xccmd foldAllMethods<CR>
noremap <Space>fM :xccmd unfoldAllMethods<CR>
noremap <Space>fc :xccmd foldAllComments<CR>
noremap <Space>fC :xccmd unfoldAllComments<CR>

" Refactoring
noremap <Space>rR :xccmd editAllInScope<CR>
noremap <Space>rr :xccmd refactorRename<CR>
noremap <Space>rx :xccmd refactorExtract<CR>
noremap <Space>re :xccmd refactorEncapsulate<CR>
noremap <Space>rm :xccmd refactorMoveUp<CR>
noremap <Space>rM :xccmd refactorMoveDown<CR>
noremap <Space>rs :xccmd refactorCreateSuperclass<CR>
" BBUncrustify
noremap <Space>rf :xcmenucmd Format Active File<CR>
noremap <Space>rl :xcmenucmd Format Selected Lines<CR>

" Navigation
noremap <Space>j }
noremap <Space>k {
noremap <Space>l ``
noremap <Space>L `.
noremap gt :xccmd selectNextTab<CR>
noremap gT :xccmd selectPreviousTab<CR>
noremap <Space>n :xccmd jumpToNextCounterpart<CR>
noremap <Space>N :xccmd jumpToPreviousCounterpart<CR>
"noremap <Space>gp :xccmd jumpToPreviousCounterpart<CR>
"noremap <Space>gP :xccmd jumpToPreviousCounterPartWithAlternate<CR>
noremap <Space>gi :xccmd jumpToNextIssue<CR>
noremap <Space>gI :xccmd jumpToPreviousIssue<CR>
noremap <Space>gh :xccmd goBackInHistoryByCommand<CR>
noremap <Space>gH :xccmd goForwardInHistoryByCommand<CR>
noremap <Space>gd :xccmd jumpToDefinition<CR>
noremap <Space>gD :xccmd jumpToDefinitionWithAlternate<CR>
noremap <Space>gp :xccmd revealInProjectNavigator<CR>
noremap <Space>gs :xccmd revealInSymbolNavigator<CR>
noremap <Space>gb :xccmd revealInDebugNavigator<CR>
" Using fixNextIssue/fixPreviousIssue this way will crash XCode
"noremap <Space>fi :xccmd fixNextIssue<CR>
"noremap <Space>fI :xccmd fixPreviousIssue<CR>

" Menus
noremap <Space>sr :xccmd showRelatedItemsMenu<CR>
noremap <Space>sh :xccmd showPreviousHistoryMenu<CR>
noremap <Space>sH :xccmd showNextHistoryMenu<CR>
noremap <Space>sf :xccmd showPreviousFilesHistoryMenu<CR>
noremap <Space>sF :xccmd showNextFilesHistoryMenu<CR>
noremap <Space>sd :xccmd showDocumentItemsMenu<CR>
noremap <Space>sg :xccmd showGroupFilesMenu<CR>
noremap <Space>st :xccmd showTopLevelItemsMenu<CR>
noremap <Space>ss :xccmd showInFinder<CR>
noremap <Space>se :xccmd openWithExternalEditor<CR>
noremap <Space>so :xcmenucmd Organizer<CR>
noremap <Space>si :xcmenucmd Show Invisibles<CR>

" Toggle bars
noremap <Space>th :xccmd toggleNavigatorsVisibility<CR>
noremap <Space>tj :xccmd toggleDebuggerVisibility<CR>
noremap <Space>tk :xccmd toggleToolbarShown<CR>
noremap <Space>tl :xccmd toggleUtilitiesVisibility<CR>
noremap <Space>ta :xccmd toggleUtilitiesVisibility<CR> :xccmd toggleDebuggerVisibility<CR> :xccmd toggleNavigatorsVisibility<CR>
noremap <Space>tt :xccmd toggleDebuggerVisibility<CR> :xccmd toggleNavigatorsVisibility<CR>
noremap <Space>tw :set wrap<CR>
noremap <Space>tW :set nowrap<CR>
noremap <Space>ts :set wrapscan<CR>
noremap <Space>tS :set nowrapscan<CR>

" Find and Replace
noremap <Space>fv :xccmd find<CR> :xccmd useSelectionForFind<CR>
noremap <Space>fV :xccmd findAndReplace<CR> :xccmd useSelectionForFind<CR>
noremap <Space>fw :xccmd findSelectedTextInWorkspace<CR>
noremap <Space>fW :xccmd findSelectedTextInWorkspace<CR> :xccmd findAndReplaceInWorkspace<CR>
noremap <Space>fn :xccmd findNext<CR>
noremap <Space>fN :xccmd replaceAndFindNext<CR>
noremap <Space>fp :xccmd findPrevious<CR>
noremap <Space>fP :xccmd replaceAndFindPrevious<CR>

"" Debugging
noremap <Space>dv :xccmd changeToDebuggerNavigator<CR>
noremap <Space>dc :xccmd clearConsole<CR>
noremap <Space>dt :xccmd pauseOrContinue<CR>
noremap <Space>do :xccmd stepOver<CR>
noremap <Space>di :xccmd stepInto<CR>
noremap <Space>dq :xccmd stepOut<CR>
noremap <Space>dm :xccmd viewMemory<CR>

"" Breakpoints
noremap <Space>bv :xccmd changeToBreakpointsNavigator<CR>
noremap <Space>ba :xccmd toggleBreakpoints<CR>
noremap <Space>bb :xccmd toggleBreakpointAtCurrentLine<CR>
" Tuna
noremap <Space>bp :xcmenucmd Set Print Breakpoint<CR>
noremap <Space>bt :xcmenucmd Set Backtrace Breakpoint<CR>

"" Help
noremap <Space>hd :xccmd showDeveloperDocumentation<CR>
noremap <Space>hq :xccmd showQuickHelp<CR>
noremap <Space>hh :xccmd searchDocumentationForSelectedText<CR>

"" Execution
noremap <Space>e. :xccmd cancelCurrentExecution<CR>
noremap <Space>er :xccmd runActiveRunContext<CR>
noremap <Space>eR :xccmd editAndRunActiveRunContext<CR>
noremap <Space>et :xccmd testActiveRunContext<CR>
noremap <Space>eT :xccmd editAndTestActiveRunContext<CR>
noremap <Space>ep :xccmd profileActiveScheme<CR>
noremap <Space>eP :xccmd editAndProfileActiveScheme<CR>
noremap <Space>ea :xccmd analyzeActiveRunContext<CR>
noremap <Space>eA :xccmd editAndAnalyzeActiveRunContext<CR>
noremap <Space>eb :xccmd buildActiveRunContext<CR>
noremap <Space>ec :xccmd cleanActiveRunContext<CR>

"" Version Control
noremap <Space>vh :xcmenucmd History...<CR>
noremap <Space>vb :xcmenucmd Show Blame For Line<CR> 
noremap <Space>vc :xccmd commitCommand<CR>
noremap <Space>vp :xccmd pushCommand<CR>
noremap <Space>vu :xccmd updateCommand<CR>
noremap <Space>vU :xccmd updateAllCommand<CR>
noremap <Space>vr :xccmd revertCommand<CR>
noremap <Space>vs :xccmd createSnapshot<CR>
noremap <Space>vS :xccmd restoreSnapshot<CR>
" GitDiff (Version Control)
noremap <Space>vv :xcmenucmd Next Change<CR>
noremap <Space>vV :xcmenucmd Previous Change<CR>

