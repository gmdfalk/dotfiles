#!/bin/bash
#

usage() {
    local script_name="$(basename $0)"
    cat << EOF
Description:
    Wrapper for playerctl to control media playback

Usage:
    $script_name (play-pause | pause | prev | next | status | mute)

EOF
    exit
}
[[ "$#" -lt 1 ]] && usage

# Always execute mute on remote
[[ $1 == mute ]] && ssh htpc "pamixer --toggle-mute" && exit 0

SPOTIFY_FOUND="$(pgrep spotify)"
COMMAND="playerctl $1 --player=spotify"

if [[ $HOSTNAME != "htpc" ]] && [[ -z $SPOTIFY_FOUND ]]; then
    echo "${COMMAND}"
    ssh htpc ${COMMAND}
else
    eval $(${COMMAND})
fi
